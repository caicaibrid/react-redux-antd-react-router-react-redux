{"version":3,"sources":["login.js"],"names":[],"mappings":";;;;;;;;;;;;QAQgB,a,GAAA,a;QAoBA,Q,GAAA,Q;QAuBA,S,GAAA,S;;AAhDhB;;AACA;;AAEA;;;;AAEO,SAAS,aAAT,GAAyB;AAC5B,QAAI,WAAW,uBAAS,UAAT,CAAf;AACA,QAAG,QAAH,EAAY;AACR,eAAO;AACH,4CADG;AAEH;AAFG,SAAP;AAIH,KALD,MAKM;AACF,wBAAM,KAAN,CAAY;AACR,mBAAO,aADC;AAER,oBAAO,IAFC;AAGR,kBAAK,gBAAY;AACd,yCAAY,IAAZ,CAAiB,QAAjB;AACF;AALO,SAAZ;AAOA,eAAO;AACH;AADG,SAAP;AAGH;AACJ,C,CA3BD;;;AA4BO,SAAS,QAAT,CAAkB,GAAlB,EAAuB;AAC1B,WAAQ,oBAAU;AACN;AACA,iBAAS;AACL,wCADK;AAEL,sBAAS,IAAI;AAFR,SAAT;AAIA;AACA,YAAI,OAAJ,CAAY,UAAC,OAAD,EAAS,MAAT,EAAkB;AAC1B,uBAAW,YAAI;AACX,uCAAS,UAAT,EAAoB,IAAI,QAAxB;AACA,wBAAQ;AACJ,oDADI;AAEJ,8BAAS,IAAI;AAFT,iBAAR;AAIH,aAND,EAME,IANF;AAOH,SARD,EAQG,IARH,CAQQ,eAAK;AACT,qCAAY,IAAZ,CAAiB,GAAjB;AACA,qBAAS,GAAT;AACH,SAXD;AAYH,KAnBT;AAoBH;;AAEM,SAAS,SAAT,GAAqB;AACxB;AACA,8BAAY,UAAZ;AACA,WAAO;AACH;AADG,KAAP;AAGH","file":"login-compiled.js","sourcesContent":["/**\r\n * Created by Administrator on 2017/6/4 0004.\r\n */\r\nimport {LOGIN_ING,LOGIN_OUT,LOGIN_SUCCESS} from \"./actionTypes\"\r\nimport {getStore,removeStore,setStore} from \"../utils/storage\"\r\nimport { Modal } from 'antd'\r\nimport { hashHistory } from 'react-router';\r\n\r\nexport function getLoginState() {\r\n    let username = getStore(\"username\")\r\n    if(username){\r\n        return {\r\n            type:LOGIN_SUCCESS,\r\n            username\r\n        }\r\n    }else {\r\n        Modal.error({\r\n            title: '登录失效,请重新登录!',\r\n            okText:\"确定\",\r\n            onOk:function () {\r\n               hashHistory.push(\"/login\")\r\n            }\r\n        });\r\n        return {\r\n            type:LOGIN_OUT\r\n        }\r\n    }\r\n}\r\nexport function login_in(obj) {\r\n    return  dispatch=>{\r\n                //pending  正在进行登录的状态\r\n                dispatch({\r\n                    type:LOGIN_ING,\r\n                    username:obj.username\r\n                })\r\n                //开始发送异步请求登录\r\n                new Promise((resolve,reject)=>{\r\n                    setTimeout(()=>{\r\n                        setStore('username',obj.username)\r\n                        resolve({\r\n                            type:LOGIN_SUCCESS,\r\n                            username:obj.username\r\n                        })\r\n                    },2000)\r\n                }).then(res=>{\r\n                    hashHistory.push(\"/\")\r\n                    dispatch(res)\r\n                })\r\n            }\r\n}\r\n\r\nexport function login_out() {\r\n    //删除登录信息\r\n    removeStore(\"username\")\r\n    return {\r\n        type:LOGIN_OUT\r\n    }\r\n}"]}